"use strict";(self.webpackChunkpolkadot_js=self.webpackChunkpolkadot_js||[]).push([[3470],{4137:function(e,t,a){a.d(t,{Zo:function(){return l},kt:function(){return h}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),c=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},l=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(a),f=r,h=d["".concat(p,".").concat(f)]||d[f]||u[f]||i;return a?n.createElement(h,o(o({ref:t},l),{},{components:a})):n.createElement(h,o({ref:t},l))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=f;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}f.displayName="MDXCreateElement"},7107:function(e,t,a){a.r(t),a.d(t,{assets:function(){return l},contentTitle:function(){return p},default:function(){return h},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var n=a(7462),r=a(3366),i=(a(7294),a(4137)),o=["components"],s={title:"TypeScript interfaces"},p=void 0,c={unversionedId:"api/start/typescript",id:"api/start/typescript",title:"TypeScript interfaces",description:"The API is written in TypeScript, and as such definitions for all actual exposed interfaces are available. In general terms, care has been taken to expose types via a @polkadot//types interface, for instance the ApiOptions type which is passed through on the .create interface is available under @polkadot/api/types.",source:"@site/docs/api/start/typescript.md",sourceDirName:"api/start",slug:"/api/start/typescript",permalink:"/docs/api/start/typescript",draft:!1,editUrl:"https://github.com/polkadot-js/docs/edit/master/docs/api/start/typescript.md",tags:[],version:"current",frontMatter:{title:"TypeScript interfaces"},sidebar:"reference",previous:{title:"Type creation",permalink:"/docs/api/start/types.create"},next:{title:"TypeScript user generated",permalink:"/docs/api/start/typescript.user"}},l={},d=[{value:"RPC interfaces",id:"rpc-interfaces",level:2},{value:"Storage generics",id:"storage-generics",level:2},{value:"Adding user types",id:"adding-user-types",level:2}],u={toc:d},f="wrapper";function h(e){var t=e.components,a=(0,r.Z)(e,o);return(0,i.kt)(f,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The API is written in TypeScript, and as such definitions for all actual exposed interfaces are available. In general terms, care has been taken to expose types via a ",(0,i.kt)("inlineCode",{parentName:"p"},"@polkadot/<package>/types")," interface, for instance the ",(0,i.kt)("inlineCode",{parentName:"p"},"ApiOptions")," type which is passed through on the ",(0,i.kt)("inlineCode",{parentName:"p"},".create")," interface is available under ",(0,i.kt)("inlineCode",{parentName:"p"},"@polkadot/api/types"),"."),(0,i.kt)("h2",{id:"rpc-interfaces"},"RPC interfaces"),(0,i.kt)("p",null,'Before getting to the "hard things", i.e. methods as decorated based on metadata interfaces, let\'s take a look at more "static" interfaces such as RPC. (Be aware though that these can be customized on a per-chain basis as well - for now this functionality is not reflected in the API itself).'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { Header } from '@polkadot/types/interfaces';\n\n...\nconst firstHead = api.rpc.chain.getHeader();\n\napi.rpc.chain.subscribeNewHeads((lastHead: Header): void => {\n  console.log('current header:', JSON.stringify(lastHead));\n});\n")),(0,i.kt)("p",null,"In the above example a couple of things are introduced - most of the chain definitions (the default types for both Polkadot & Substrate) can be imported as interfaces from the ",(0,i.kt)("inlineCode",{parentName:"p"},"@polkadot/types/interfaces")," endpoint. These are not classes (since they are ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/polkadot-js/api/tree/master/packages/types/src/interfaces"},"generated from definitions"),") but rather a combination of TypeScript ",(0,i.kt)("inlineCode",{parentName:"p"},"interfaces")," (where structures are involved) and ",(0,i.kt)("inlineCode",{parentName:"p"},"type"),", i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},"type Balance = u128"),"."),(0,i.kt)("p",null,"In the subscription example, we explicitly define ",(0,i.kt)("inlineCode",{parentName:"p"},"lastHead: Header"),", although the same definition is missing for ",(0,i.kt)("inlineCode",{parentName:"p"},"firstHead"),". However, in both these cases the definitions for the ",(0,i.kt)("inlineCode",{parentName:"p"},"api.rpc")," sections are such that TypeScript understands that ",(0,i.kt)("inlineCode",{parentName:"p"},"firstHead")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"lastHead")," are of type ",(0,i.kt)("inlineCode",{parentName:"p"},"Header"),". The ",(0,i.kt)("inlineCode",{parentName:"p"},": Header")," here is rather for our own understanding (and could be needed based on your eslint/tslint config)."),(0,i.kt)("p",null,"As indicated, most of the Polkadot/Substrate default types are available via ",(0,i.kt)("inlineCode",{parentName:"p"},"types/interfaces"),". However, for primitives types where there is an actual implementation, these are made available via ",(0,i.kt)("inlineCode",{parentName:"p"},"@polkadot/types")," directly. For instance, ",(0,i.kt)("inlineCode",{parentName:"p"},"import { u32 } from '@polkadot/types")," is valid in this context."),(0,i.kt)("h2",{id:"storage-generics"},"Storage generics"),(0,i.kt)("p",null,"For any interface injected by metadata, the types are not fully described but rather names and the API will decode all these into an instance that complies with the ",(0,i.kt)("inlineCode",{parentName:"p"},"Codec")," interface. (The base of all our types)"),(0,i.kt)("p",null,"However, this does allow you to perform overrides via generics, making the following possible -"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { Balance } from '@polkadot/types/interfaces';\n\ntype Balance2 = Balance;\n\n...\nconst total = await api.query.balances.totalIssuance<Balance2>();\n")),(0,i.kt)("p",null,"In this example (although the query does indeed return a ",(0,i.kt)("inlineCode",{parentName:"p"},"Balance"),") we can instruct the TypeScript compiler that we are expecting a ",(0,i.kt)("inlineCode",{parentName:"p"},"Balance2"),", not just the interface as generated. This means that functions like ",(0,i.kt)("inlineCode",{parentName:"p"},".toNumber()")," is available on both these types - as opposed to just the ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/start/types.basics#everything-is-a-type"},"general type defaults")," with ",(0,i.kt)("inlineCode",{parentName:"p"},".toHex()")," and friends."),(0,i.kt)("h2",{id:"adding-user-types"},"Adding user types"),(0,i.kt)("p",null,"In addition to the generated and available interfaces, there is also the ability to ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/start/typescript.user"},"create TypeScript interfaces from your own definitions and well as your on-chain modules"),"."))}h.isMDXComponent=!0}}]);