"use strict";(self.webpackChunkpolkadot_js=self.webpackChunkpolkadot_js||[]).push([[31],{4137:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=l(n),f=a,m=d["".concat(s,".").concat(f)]||d[f]||p[f]||o;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2870:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return f},frontMatter:function(){return c},metadata:function(){return l},toc:function(){return p}});var r=n(7462),a=n(3366),o=(n(7294),n(4137)),i=["components"],c={title:"FAQ"},s=void 0,l={unversionedId:"api-contract/FAQ",id:"api-contract/FAQ",title:"FAQ",description:"The list will be updated/expanded as questions come up, dealing with some common issues that API users find.",source:"@site/docs/api-contract/FAQ.md",sourceDirName:"api-contract",slug:"/api-contract/FAQ",permalink:"/docs/api-contract/FAQ",draft:!1,editUrl:"https://github.com/polkadot-js/docs/edit/master/docs/api-contract/FAQ.md",tags:[],version:"current",frontMatter:{title:"FAQ"},sidebar:"reference",previous:{title:"Contract tx",permalink:"/docs/api-contract/start/contract.tx"},next:{title:"Overview",permalink:"/docs/ui-identicon"}},u={},p=[{value:"My ABI cannot be parsed",id:"my-abi-cannot-be-parsed",level:2},{value:"Why is there a snake_case vs camelCase difference",id:"why-is-there-a-snake_case-vs-camelcase-difference",level:2},{value:"How do I subscribe to a contract query?",id:"how-do-i-subscribe-to-a-contract-query",level:2}],d={toc:p};function f(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The list will be updated/expanded as questions come up, dealing with some common issues that API users find."),(0,o.kt)("h2",{id:"my-abi-cannot-be-parsed"},"My ABI cannot be parsed"),(0,o.kt)("p",null,'When passing an older pre ink! 3.0-rc1 version of the ABI, you will have an "Invalid JSON ABI structure supplied, expected a recent metadata version" error being returned. As explained in the ',(0,o.kt)("a",{parentName:"p",href:"/docs/api-contract/start/install"},"getting started guide")," as of ",(0,o.kt)("inlineCode",{parentName:"p"},"@polkadot/api-contract")," 2.2+ the older ink! 2.1 versions are not supported."),(0,o.kt)("p",null,"If you are using an older version you would need to use an older version of the API or upgrade your contracts to ink! 3.0."),(0,o.kt)("h2",{id:"why-is-there-a-snake_case-vs-camelcase-difference"},"Why is there a snake_case vs camelCase difference"),(0,o.kt)("p",null,"The API always tries to use ",(0,o.kt)("inlineCode",{parentName:"p"},"camelCase")," naming where available. This aligns with the de-facto standards that are generally (not always!) used in JS interfaces. This means that when decorating the ABIs into ",(0,o.kt)("inlineCode",{parentName:"p"},"contract.<query|tx>.methodName")," the ",(0,o.kt)("inlineCode",{parentName:"p"},"methodName")," part would be in camelCase format."),(0,o.kt)("p",null,"An example of this would be in the erc20 ink! ABI - the method in the above would be ",(0,o.kt)("inlineCode",{parentName:"p"},"balance_of")," however the API (for consistency with the full suite of libraries), decorate this as ",(0,o.kt)("inlineCode",{parentName:"p"},"contract.query.balanceOf"),"."),(0,o.kt)("h2",{id:"how-do-i-subscribe-to-a-contract-query"},"How do I subscribe to a contract query?"),(0,o.kt)("p",null,"Subscriptions, and queries to the raw storage are on their way! Unfortunately until then there isn't a proper way to subscribe to a contract query. A temporary workaround is to subscribe to ",(0,o.kt)("inlineCode",{parentName:"p"},"api.query.contracts.contractInfoOf"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const unsub = await api.query.contracts.contractInfoOf(contractAddress, async () => {\n    // Perform a read of the contract's `get` message\n    const callValue = await contract.query.get(alicePair.address, value, gasLimit);\n\n    // Do something with callValue\n  });\n")),(0,o.kt)("p",null,"But this workaround is not without drawbacks. Since the callback will be executed every time the contract's storage is affected you will ultimately end up calling your contract query more often than necessary."))}f.isMDXComponent=!0}}]);